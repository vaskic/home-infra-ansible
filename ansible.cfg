# ===========================================
# Ansible configuration file
# Location: ~/git/home-infrastructure/ansible.cfg
# Last update: 30.10.2025
# ===========================================

[defaults]
# Inventory file
inventory = ./inventories/production/hosts.yaml
# Default locations for roles and collections
roles_path = ./roles
collections_paths = ./collections
# Disable SSH host key checking (useful in lab/test environments)
# For production, you might want to enable this for better security
host_key_checking = False
# Disable retry files (e.g., playbook.retry)
retry_files_enabled = False
# Define Ansible Vault password file and identity name
vault_identity_list = default@.vault-pass
# Set default fork count (number of parallel hosts Ansible runs on)
# Adjust based on CPU and SSH connection stability !
forks = 25
# Control how fact gathering is handled (faster = more efficient)
# "smart" = only gather facts if missing or changed
gathering = smart
# Cache facts between runs to avoid re-gathering (improves speed)
fact_caching = jsonfile
fact_caching_connection = ./cache/facts
# Cache facts for 1 day (in seconds)
fact_caching_timeout = 86400
# Set default strategy (linear = sequential, free = parallel without waiting)
strategy = free
# Disable deprecation warnings and reduce verbosity in clean output
deprecation_warnings = False
command_warnings = False
# Keep output clean and more readable (especially in automation logs)
stdout_callback = yaml
bin_ansible_callbacks = True


[ssh_connection]
# -------------------------------------------
# SSH connection optimizations
# -------------------------------------------
# Enable pipelining to speed up SSH operations
pipelining = True
# Reuse SSH connections to avoid reconnecting every task
ssh_args = -o ControlMaster=auto -o ControlPersist=60s
# Set SSH control path (stored locally for multiplexing)
control_path = ~/.ssh/ansible-%%r@%%h:%%p
# Reduce connection setup overhead (good for stable local networks)
retries = 2
timeout = 10


[privilege_escalation]
# -------------------------------------------
# Privilege escalation (sudo)
# -------------------------------------------
become = True
become_method = sudo
become_ask_pass = False


[colors]
# -------------------------------------------
# CLI output colors (for readability)
# -------------------------------------------
highlight = white
verbose = blue
warn = yellow
error = red


[diff]
# -------------------------------------------
# Show diffs when templates or files change
# -------------------------------------------
always = True
context = 3
